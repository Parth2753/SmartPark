<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartPark AI</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');

:root{
  --bg:#0c0c0f;
  --txt:#00fff0;
  --free:#00ff7f;
  --booked:#ff073a;
}

body{
  background:var(--bg);
  color:var(--txt);
  font-family:'Orbitron',sans-serif;
  margin:0;
  min-height:100vh;
}

header{
  padding:15px;
  text-align:center;
  background:#001f2d;
  box-shadow:0 0 20px var(--txt);
}

main{padding:20px}

/* ===== PARKING GRID ===== */
#parkingGrid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:18px;
  margin-bottom:40px;
}

.slot{
  padding:18px;
  border-radius:14px;
  font-weight:bold;
  text-align:center;
  cursor:pointer;
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}

.slot:hover{transform:scale(1.08)}

.free{
  background:linear-gradient(135deg,#00ff7f,#00cc66);
  color:black;
  box-shadow:0 0 12px #00ff7f;
}

.booked{
  background:linear-gradient(135deg,#ff073a,#b3001b);
  color:white;
  box-shadow:0 0 12px #ff073a;
}

/* ===== SECTION CARD ===== */
.section-card{
  padding:25px;
  margin-top:25px;
  background:linear-gradient(145deg,rgba(0,255,240,0.1),rgba(0,0,0,0.7));
  border-radius:18px;
  border:1px solid rgba(0,255,240,0.4);
  box-shadow:0 0 25px rgba(0,255,240,0.25);
}

.section-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.section-card input,
.section-card select{
  width:90%;
  padding:10px;
  margin-top:8px;
  border-radius:10px;
  background:black;
  border:1px solid var(--txt);
  color:var(--txt);
}

.action-btn{
  margin-top:15px;
  padding:10px 22px;
  border-radius:25px;
  background:linear-gradient(135deg,#00fff0,#0066ff);
  color:black;
  font-weight:bold;
  border:none;
  cursor:pointer;
}

.live-dot{
  width:10px;
  height:10px;
  background:red;
  border-radius:50%;
  box-shadow:0 0 10px red;
  animation:blink 1s infinite;
}
.section-card select{
  width:90%;
  padding:10px;
  margin-top:8px;
  border-radius:10px;
  background:black;
  border:1px solid var(--txt);
  color:var(--txt);
}


@keyframes blink{
  0%{opacity:1}
  50%{opacity:0.3}
  100%{opacity:1}
}

#liveRegister{
  list-style:none;
  padding-left:0;
}

#liveRegister li{
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  background:rgba(255,7,58,0.15);
  border-left:4px solid var(--booked);
}

table{
  width:100%;
  border-collapse:collapse;
}

table th,table td{
  border:1px solid var(--txt);
  padding:8px;
  text-align:center;
}

table th{
  background:rgba(0,255,240,0.15);
}
</style>
</head>

<body>

<header>
<h1>SmartPark AI</h1>
</header>

<main>

<h2>Parking Slots</h2>
<div id="parkingGrid"></div>

<!-- REGISTER SLOT -->
<form id="bookingForm" class="section-card">
  <div class="section-header"><h2>Register Slot</h2></div>

  <label>Name <input id="userName" required></label><br><br>
 <label>Vehicle Number</label><br>

<select id="stateCode" autocomplete="off" required>
  <option value="">Select State</option>
  <option value="TG">TG</option>
  <option value="AP">AP</option>
  <option value="DL">DL</option>
  <option value="UP">UP</option>
  <option value="HR">HR</option>
</select>

<input 
  type="text"
  id="vehicleNo"
  placeholder="09 AB 1234"
  autocomplete="off"
  required
>
<label>
  <br>
  <br>
  Type
  <br>
    <select id="vehicleType">
      <option>Car</option>
      <option>Bike</option>
      <option>EV</option>
    </select>
  </label><br><br>
  <label>Slot 
    <br>
    <input type="number" id="slotNumber" min="1" max="40" required></label><br>
  <button class="action-btn">Book Slot</button>
</form>

<!-- SEARCH -->
<section class="section-card">
  <h2>Search Vehicle</h2>
  <input id="searchVehicleInput" placeholder="Vehicle Number">
  <button class="action-btn" onclick="searchVehicle()">Search</button>
  <p id="searchResult"></p>
</section>

<!-- LIVE TRACKING -->
<section class="section-card">
  <div class="section-header">
    <h2>Live Tracking</h2>
    <span class="live-dot"></span>
  </div>
  <ul id="liveRegister"></ul>
</section>

<!-- CHECKOUT -->
<section class="section-card">
  <h2>Checkout Vehicle</h2>
  <input type="number" id="checkoutSlot" placeholder="Slot Number">
  <button class="action-btn" onclick="checkoutVehicle()">Checkout</button>
</section>

<!-- HISTORY -->
<section class="section-card">
  <h2>Slot History</h2>
  <table>
    <thead>
      <tr>
        <th>Slot</th>
        <th>Vehicle</th>
        <th>Type</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody id="historyTable"></tbody>
  </table>
</section>

</main>

<script>
const parkingGrid=document.getElementById("parkingGrid");
const liveRegister=document.getElementById("liveRegister");
const historyTable=document.getElementById("historyTable");

const totalSlots=40;
let slots=[];
let history=[];

/* INIT SLOTS */
for(let i=1;i<=totalSlots;i++){
  slots.push({number:i,status:"free",vehicle:"",type:""});
}

/* RENDER GRID */
function renderGrid(){
  parkingGrid.innerHTML="";
  slots.forEach(s=>{
    const d=document.createElement("div");
    d.className=`slot ${s.status}`;
    d.innerHTML=`Slot ${s.number}<br>${s.status==="free"?"FREE":s.vehicle}`;
    d.onclick=()=>slotNumber.value=s.number;
    parkingGrid.appendChild(d);
  });
}

/* BOOK SLOT */
bookingForm.onsubmit=e=>{
  e.preventDefault();
  const i=slots.findIndex(s=>s.number==slotNumber.value);
  if(slots[i].status==="booked"){alert("Slot already booked");return;}
  slots[i].status="booked";
  const fullVehicleNo = stateCode.value + "-" + vehicleNo.value.trim().toUpperCase();
slots[i].vehicle = fullVehicleNo;
  slots[i].type=vehicleType.value;
  history.push({slot:slots[i].number,vehicle: fullVehicleNo,type:vehicleType.value,time:new Date()});
  bookingForm.reset();
  renderAll();
};

/* SEARCH */
function searchVehicle(){
  const v = searchVehicleInput.value.trim().toUpperCase();
  const s = slots.find(x => x.vehicle === v);
  searchResult.textContent = s ? `Found in Slot ${s.number}` : "Not Found";
}

/* CHECKOUT */
function checkoutVehicle(){
  const i=slots.findIndex(s=>s.number==checkoutSlot.value);
  if(i<0||slots[i].status==="free"){alert("Invalid Slot");return;}
  slots[i].status="free";
  slots[i].vehicle="";
  slots[i].type="";
  renderAll();
}

/* LIVE */
function updateLive(){
  liveRegister.innerHTML="";
  slots.filter(s=>s.status==="booked").forEach(s=>{
    const li=document.createElement("li");
    li.textContent=`Slot ${s.number} â†’ ${s.vehicle} (${s.type})`;
    liveRegister.appendChild(li);
  });
}

/* HISTORY */
function renderHistory(){
  historyTable.innerHTML="";
  history.forEach(h=>{
    const r=document.createElement("tr");
    r.innerHTML=`<td>${h.slot}</td><td>${h.vehicle}</td><td>${h.type}</td><td>${h.time.toLocaleTimeString()}</td>`;
    historyTable.appendChild(r);
  });
}

function renderAll(){
  renderGrid();
  updateLive();
  renderHistory();
}

renderAll();
</script>

</body>
</html>
